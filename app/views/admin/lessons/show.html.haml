%header.subhead#overview
  %h2 Container
  .subnav
    %ul.nav.nav-pills
      %li
        = link_to_if can?(:update, @lesson), "Edit", edit_admin_lesson_path(@lesson) do
          %a.unable Edit
      %li
        = link_to_if can?(:update, @lesson) || can?(:edit_descriptions, @lesson), 'Edit Long Description', edit_long_descr_admin_lesson_path(@lesson) do
          .unable Edit Long Description
      %li
        = link_to_if can?(:update, @lesson) || can?(:edit_transcripts, @lesson), 'Edit Transcript', edit_transcript_admin_lesson_path(@lesson) do
          .unable Edit Transcript
      %li
        = link_to_if can?(:destroy, @lesson), "Destroy", admin_lesson_path(@lesson), :class => 'label label-important', :confirm => 'Are you sure?', :method => :delete do
          %a.unable Destroy
      %li= link_to "View All", admin_lessons_path

%section.well
  = display_show_item('ID', @lesson.lessonid)
  = display_show_item('Name', @lesson.lessonname)
  = display_show_item('Type', @lesson.content_type.try(:name))
  = display_show_item('Created', @lesson.created.to_s(:long_ordinal))
  = display_show_item('Updated', @lesson.updated.to_s(:long_ordinal))
  = display_show_item('Container date', @lesson.lessondate)
  = display_show_item('Language', @lesson.language)
  = display_show_item('Lecturer', @lesson.lecturer)
  = display_show_item('Secure', display_secure(@lesson.secure), true)
%section
  %strong Descriptions:
  %table.table.table-striped.table-bordered.table-condensed
    %thead
      %tr
        %th Language
        %th Container Description/Long Description
        %th Created on
        %th Updated on
        %th ID
    %tbody
      - @lesson.lesson_descriptions.each do |admin_lesson_desc|
        - next if (admin_lesson_desc.lessondesc || admin_lesson_desc.descr).blank?
        %tr
          %td= admin_lesson_desc.lang
          %td
            = admin_lesson_desc.lessondesc
            - unless admin_lesson_desc.descr.blank?
              %hr.soften.no-margin
              = admin_lesson_desc.descr
          %td= admin_lesson_desc.created.try(:to_date)
          %td= admin_lesson_desc.updated.try(:to_date)
          %td= admin_lesson_desc.lessondescid
%section
  %strong Transcripts:
  %table.table.table-striped.table-bordered.table-condensed
    %thead
      %tr
        %th Language
        %th TOC
        %th Transcript
        %th Created on
        %th Updated on
        %th ID
    %tbody
      - @lesson.lesson_transcripts.each do |t|
        - next if (t.transcript).blank?
        %tr
          %td= t.lang
          %td= t.toc
          %td= t.transcript
          %td= t.created_at.try(:to_date)
          %td= t.updated_at.try(:to_date)
          %td= t.id

%section
  %strong Catalogs:
  %table.table.table-striped.table-bordered.table-condensed
    %thead
      %tr
        %th ID
        %th Name
    %tbody
      - @lesson.catalogs.each do |catalog|
        %tr
          %td= catalog.catalognodeid
          %td= catalog.catalognodename
%section
  %strong Files:
  %table.table.table-striped.table-bordered.table-condensed
    %thead
      %tr
        %th ID
        %th Name
        %th Security
        %th Recorded at
        %th Created on
        %th Updated on
        %th Language
        %th(colspan=3) Actions
    %tbody
      - @lesson.file_assets.each do |asset|
        %tr
          %td= link_to asset.fileid, asset.url, :target => '_blank'
          %td= asset.filename
          %td= display_secure(asset.secure)
          %td= asset.filedate.try(:to_date)
          %td= asset.created.try(:to_date)
          %td= asset.updated.try(:to_date)
          %td= asset.filelang
          %td= link_to 'Show', [:admin, asset]
          %td
            = link_to_if can?(:update, asset), 'Edit', edit_admin_file_asset_path(asset) do
              .unable Edit
          %td
            = link_to_if can?(:destroy, asset), 'Destroy', [:admin, asset], :confirm => 'Are you sure?', :method => :delete do
              .unable Destroy
