- title "Search results for #{@query}"
%h4== Displaying posts #{(@search.results.current_page - 1) * @search.results.limit_value + 1} - #{[@search.results.current_page * @search.results.limit_value, @search.total].min} of #{@search.total}
%br
= paginate @search.hits, :window => 8
%br
%table.admin_table.bp
  %thead
    %tr
      %th ID
      %th Type
      %th Name
  - @search.each_hit_with_result do |hit, result|
    - klass = result.class
    %tr(class="#{cycle('odd', 'even')}")
      - case
      - when klass == Asset
        - asset = result
        %td= asset.fileid
        %td= link_to 'Asset', admin_asset_path(asset)
        %td= "#{asset.filename} (#{asset.filesize})"
      - when klass == Lesson
        - lesson = result
        %td= lesson.lessonid
        %td= link_to 'Container', admin_lesson_path(lesson)
        %td= lesson.lessonname
      - when klass == LessondescPattern
        - pattern = result
        %td= pattern.id
        %td= link_to 'Containers\' pattern', admin_lessondesc_pattern_path(pattern)
        %td
          = pattern.pattern
          (
          = pattern.lang
          )(
          = pattern.description
          )
      - when klass == LessonDescription
        - lesson_description = result
        %td= lesson_description.lessondescid
        %td= link_to 'Container_Description', admin_lesson_path(lesson_description.lesson.id) if lesson_description.lesson
        %td
          = lesson_description.lessondesc
          (
          = lesson_description.lang
          )
      - when klass == Catalog
        - catalog = result
        %td= result.catalognodeid
        %td= link_to klass, admin_catalog_path(catalog)
        %td
          - if catalog.parent
            %span.small
              = catalog.parent.catalognodename.gsub(/\//, ' / ')
              (
              = catalog.parentnodeid
              ) /
          %span.bold
            = catalog.catalognodename.gsub(/\//, ' / ')
            %span.small
              (
              = catalog.catalognodeid
              )
      - else
        %td(rowspan=3)= "Unknown: #{klass}"

%br
= paginate @search, :window => 8
%br
